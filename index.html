<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„ØµÙƒÙˆÙƒ Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8eef5 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #cc785c 0%, #b86449 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .header p {
            opacity: 0.95;
            font-size: 15px;
        }

        .content {
            padding: 30px;
        }

        .input-section {
            margin-bottom: 25px;
        }

        .input-section label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 16px;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: 'Traditional Arabic', 'Arial', sans-serif;
            font-size: 16px;
            line-height: 1.8;
            resize: vertical;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #cc785c;
        }

        .char-counter {
            text-align: left;
            margin-top: 8px;
            font-size: 13px;
            color: #666;
            font-weight: 500;
        }

        .options-section {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .checkbox-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-wrapper input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-wrapper label {
            cursor: pointer;
            user-select: none;
            font-size: 15px;
            color: #2c3e50;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        button {
            padding: 14px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }

        .btn-process {
            background: linear-gradient(135deg, #cc785c 0%, #b86449 100%);
            color: white;
            flex: 1;
            min-width: 200px;
        }

        .btn-process:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(204, 120, 92, 0.3);
        }

        .btn-process:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-copy, .btn-download {
            background: #f0f0f0;
            color: #2c3e50;
            flex: 0.5;
            min-width: 120px;
        }

        .btn-copy:hover, .btn-download:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
        }

        .btn-copy:disabled, .btn-download:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            background: #fff3cd;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid #ffc107;
        }

        .loading.show {
            display: block;
        }

        .loading-spinner {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #cc785c;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .stats {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: none;
        }

        .stats.show {
            display: block;
        }

        .stats h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 18px;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 2px 1fr;
            gap: 25px;
            align-items: start;
        }

        .stats-column {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .stats-divider {
            width: 2px;
            height: 100%;
            background: linear-gradient(to bottom, transparent, #cc785c, transparent);
            border-radius: 2px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .stat-label {
            color: #495057;
            font-weight: 500;
            font-size: 14px;
        }

        .stat-value {
            color: #cc785c;
            font-weight: 700;
            font-size: 18px;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 25px;
        }

        .text-box {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            min-height: 300px;
        }

        .text-box h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 18px;
            padding-bottom: 10px;
            border-bottom: 2px solid #cc785c;
        }

        .text-content {
            font-family: 'Traditional Arabic', 'Arial', sans-serif;
            line-height: 1.8;
            color: #2c3e50;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .corrected-word {
            text-decoration: underline;
            text-decoration-color: #e74c3c;
            text-decoration-thickness: 2px;
            text-underline-offset: 3px;
        }

        .corrected-word {
            text-decoration: underline;
            text-decoration-color: #e74c3c;
            text-decoration-thickness: 2px;
            text-underline-offset: 3px;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: none;
            animation: slideIn 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            display: block;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .stats-divider {
                display: none;
            }

            .button-group {
                flex-direction: column;
            }

            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš–ï¸ Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„ØµÙƒÙˆÙƒ Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ©</h1>
            <p>Ø£Ø¯Ø§Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© ÙˆØªÙ†Ø³ÙŠÙ‚ Ù†ØµÙˆØµ Ø§Ù„Ø¶Ø¨ÙˆØ· Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ© - Ù†Ø³Ø®Ø© 4</p>
        </div>

        <div class="content">
            <div class="input-section">
                <label for="inputText">ğŸ“ Ø£Ø¯Ø®Ù„ Ù†Øµ Ø§Ù„Ø¶Ø¨ÙˆØ·:</label>
                <textarea id="inputText" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§..."></textarea>
                <div class="char-counter" id="inputCharCount">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù: 0</div>
            </div>

            <div class="options-section">
                <div class="checkbox-wrapper">
                    <input type="checkbox" id="enableCorrection" checked>
                    <label for="enableCorrection">âœ¨ ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ´ÙƒÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙˆØ§Ù„ØªØµØ­ÙŠØ­</label>
                </div>
            </div>

            <div class="button-group">
                <button class="btn-process" onclick="processText()" id="processBtn">âš¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Øµ</button>
                <button class="btn-copy" id="copyBtn" onclick="copyResult()" disabled>ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
                <button class="btn-download" id="downloadBtn" onclick="downloadResult()" disabled>ğŸ’¾ ØªØ­Ù…ÙŠÙ„ ÙƒÙ…Ù„Ù</button>
            </div>

            <div class="loading" id="loading">
                <span>â³ Ø¬Ø§Ø±Ù Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Øµ ÙˆØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµØ­ÙŠØ­Ø§Øª...</span>
                <div class="loading-spinner"></div>
            </div>

            <div class="stats" id="stats">
                <h3>ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h3>
                <div class="stats-grid">
                    <div class="stats-column">
                        <div class="stat-item">
                            <span class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©:</span>
                            <span class="stat-value" id="sessionsCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Ø¹Ø¯Ø¯ Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø´Ø·Ø¨ Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:</span>
                            <span class="stat-value" id="deletedCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø´ÙƒÙ‘ÙÙ„Ø©:</span>
                            <span class="stat-value" id="correctionsCount">0</span>
                        </div>
                    </div>
                    <div class="stats-divider"></div>
                    <div class="stats-column">
                        <div class="stat-item">
                            <span class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬Ø© Ø§Ù„Ù…Ø³ØªØ¨Ø¯Ù„Ø©:</span>
                            <span class="stat-value" id="spacesCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø·ØªÙŠÙ† Ø§Ù„Ù…Ø³ØªØ¨Ø¯Ù„Ø©:</span>
                            <span class="stat-value" id="colonsCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø·Ø± Ø§Ù„ÙØ§Ø±ØºØ© Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:</span>
                            <span class="stat-value" id="emptyLinesCount">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="comparison" id="comparison" style="display: none;">
                <div class="text-box">
                    <h3>ğŸ“„ Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ</h3>
                    <div class="text-content" id="originalText"></div>
                    <div class="char-counter" id="originalCharCount">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù: 0</div>
                </div>
                <div class="text-box">
                    <h3>âœ¨ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø¹Ø¯Ù‘Ù„</h3>
                    <div class="text-content" id="processedText"></div>
                    <div class="char-counter" id="processedCharCount">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù: 0</div>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        let processedResult = '';

        // Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„ØªØµØ­ÙŠØ­Ø§Øª (Ø£ÙˆÙ„ 300 ÙƒÙ„Ù…Ø© Ø¨Ø¹Ø¯ ØªØµÙÙŠØ© Ø§Ù„Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø³ÙŠØ·Ø©)
const corrections = [
    ["Ø§Ø¯ÙÙ‘Ø¹Øª", "Ø£Ø¯Ø¹Øª"],
    ["Ø§Ø¯ÙÙ‘Ø¹Ù‰", "Ø£Ø¯Ø¹Ù‰"],
    ["Ø§Ø¯ÙÙ‘Ø¹ÙŠ", "Ø£Ø¯Ø¹ÙŠ"],
    ["Ø§Ø¯ÙÙ‘Ø¹ÙŠØ§", "Ø£Ø¯Ø¹ÙŠØ§"],
    ["Ø§Ø¹ØªØ±Ù", "Ø£Ø¹ØªØ±Ù"],
    ["Ø§ÙƒØªØ³Ø§Ø¨", "Ø£ÙƒØªØ³Ø§Ø¨"],
    ["Ø¢Ù„Ø§Ù", "Ø£Ù„Ø§Ù"],
    ["Ø§Ù…ØªÙ†Ø¹", "Ø£Ù…ØªÙ†Ø¹"],
    ["Ø§ØªÙÙ‘ÙØ§Ù‚", "Ø¥ØªÙØ§Ù‚"],
    ["Ø§Ø«Ù†Ø§Ù†", "Ø¥Ø«Ù†Ø§Ù†"],
    ["Ø¥Ø¨ÙÙ‘Ø§Ù†", "Ø§Ø¨Ø§Ù†"],
    ["Ø£Ø¨Ùˆ", "Ø§Ø¨Ùˆ"],
    ["Ø£ØªÙ…ÙƒÙÙ‘Ù†", "Ø§ØªÙ…ÙƒÙ†"],
    ["Ø¥Ø«Ø¨Ø§Øª", "Ø§Ø«Ø¨Ø§Øª"],
    ["Ø£Ø«Ù†Ø§Ø¡", "Ø§Ø«Ù†Ø§Ø¡"],
    ["Ø¥Ø¬Ø±Ø§Ø¡", "Ø§Ø¬Ø±Ø§Ø¡"],
    ["Ø£ÙØ¬ÙÙŠÙ’Ø¨Ù", "Ø§Ø¬ÙŠØ¨"],
    ["Ø£ÙØ¬ÙÙŠÙ’Ø¨ÙØª", "Ø§Ø¬ÙŠØ¨Øª"],
    ["Ø¥Ø­Ø§Ù„Ø©", "Ø§Ø­Ø§Ù„Ø©"],
    ["Ø£ÙØ­ÙÙŠÙ’Ù„Ù", "Ø§Ø­ÙŠÙ„"],
    ["Ø£Ø®Ø±Ø¬Ù‡", "Ø§Ø®Ø±Ø¬Ù‡"],
    ["Ø¥Ø®Ù„Ø§Ø¡", "Ø§Ø®Ù„Ø§Ø¡"],
    ["Ø¥Ø¯Ø§Ø±Ø©", "Ø§Ø¯Ø§Ø±Ø©"],
    ["Ø¥Ø¯Ø®Ø§Ù„", "Ø§Ø¯Ø®Ø§Ù„"],
    ["Ø¥Ø°Ø§", "Ø§Ø°Ø§"],
    ["Ø¥Ø²Ø§Ù„Ø©", "Ø§Ø²Ø§Ù„Ø©"],
    ["Ø£Ø³Ø¨Ø§Ø¨", "Ø§Ø³Ø¨Ø§Ø¨"],
    ["Ø£ÙØ³Ø¨ÙˆØ¹", "Ø§Ø³Ø¨ÙˆØ¹"],
    ["Ø¥Ø´ÙƒØ§Ù„", "Ø§Ø´ÙƒØ§Ù„"],
    ["Ø£ØµØ§Ù„Ø©Ù‹", "Ø§ØµØ§Ù„Ø©"],
    ["Ø£ØµØ­Ø§Ø¨", "Ø§ØµØ­Ø§Ø¨"],
    ["Ø¥Ø·Ù„Ø§Ù‚Ù‹Ø§", "Ø§Ø·Ù„Ø§Ù‚Ø§"],
    ["Ø¥Ø¹Ø§Ø¯Ø©", "Ø§Ø¹Ø§Ø¯Ø©"],
    ["Ø¥Ø¹Ø·Ø§Ø¡", "Ø§Ø¹Ø·Ø§Ø¡"],
    ["Ø£ÙØ¹Ù’Ø·ÙÙŠÙ", "Ø§Ø¹Ø·ÙŠ"],
    ["Ø¥Ø¹Ù„Ø§Ù…", "Ø§Ø¹Ù„Ø§Ù…"],
    ["Ø¥Ø¹Ù„Ø§Ù†", "Ø§Ø¹Ù„Ø§Ù†"],
    ["Ø£ÙØ¹Ù„Ù…", "Ø§Ø¹Ù„Ù…"],
    ["Ø£ÙØ¹ÙÙŠØ¯Ù", "Ø§Ø¹ÙŠØ¯"],
    ["Ø¥ÙÙ‡Ø§Ù…", "Ø§ÙÙ‡Ø§Ù…"],
    ["Ø¥Ù‚Ø§Ù…Ø©", "Ø§Ù‚Ø§Ù…Ø©"],
    ["Ø£Ù‚Ø±ÙÙ‘", "Ø§Ù‚Ø±"],
    ["Ø¥Ù‚Ø±Ø§Ø±", "Ø§Ù‚Ø±Ø§Ø±"],
    ["Ø¥ÙƒÙ…Ø§Ù„", "Ø§ÙƒÙ…Ø§Ù„"],
    ["Ø§Ù„Ø¥Ø¨Ù„", "Ø§Ù„Ø£Ø¨Ù„"],
    ["Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", "Ø§Ù„Ø£Ø«Ù†ÙŠÙ†"],
    ["Ø§Ù„Ø¥Ø¹Ù„Ø§Ù…", "Ø§Ù„Ø£Ø¹Ù„Ø§Ù…"],
    ["Ø§Ù„Ø§ØªÙÙ‘ØµØ§Ù„Ø§Øª", "Ø§Ù„Ø¥ØªØµØ§Ù„Ø§Øª"],
    ["Ø§Ù„Ø§ØªÙÙ‘ÙØ§Ù‚", "Ø§Ù„Ø¥ØªÙØ§Ù‚"],
    ["Ø§Ù„Ø§ØªÙÙ‘Ù‡Ø§Ù…", "Ø§Ù„Ø¥ØªÙ‡Ø§Ù…"],
    ["Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", "Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†"],
    ["Ø§Ù„Ø§Ø¯ÙÙ‘Ø¹Ø§Ø¡", "Ø§Ù„Ø¥Ø¯Ø¹Ø§Ø¡"],
    ["Ø§Ù„Ø§Ø³ØªØ¦Ù†Ø§Ù", "Ø§Ù„Ø¥Ø³ØªØ¦Ù†Ø§Ù"],
    ["Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±", "Ø§Ù„Ø¥Ø³ØªØ«Ù…Ø§Ø±"],
    ["Ø§Ù„Ø§Ø³ØªØ­ÙƒØ§Ù…", "Ø§Ù„Ø¥Ø³ØªØ­ÙƒØ§Ù…"],
    ["Ø§Ù„Ø§Ø³ØªØ¯Ù„Ø§Ù„", "Ø§Ù„Ø¥Ø³ØªØ¯Ù„Ø§Ù„"],
    ["Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯", "Ø§Ù„Ø¥Ø³ØªØ¹Ø¯Ø§Ø¯"],
    ["Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…", "Ø§Ù„Ø¥Ø³ØªÙ„Ø§Ù…"],
    ["Ø§Ù„Ø§Ø³ØªÙ†Ø§Ø¯", "Ø§Ù„Ø¥Ø³ØªÙ†Ø§Ø¯"],
    ["Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ", "Ø§Ù„Ø¥Ø´ØªØ±Ø§Ùƒ"],
    ["Ø§Ù„Ø§Ø·ÙÙ‘Ù„Ø§Ø¹", "Ø§Ù„Ø¥Ø·Ù„Ø§Ø¹"],
    ["Ø§Ù„Ø§Ø¹ØªØ±Ø§Ø¶", "Ø§Ù„Ø¥Ø¹ØªØ±Ø§Ø¶"],
    ["Ø§Ù„Ø£ØºÙ†Ø§Ù…", "Ø§Ù„Ø¥ØºÙ†Ø§Ù…"],
    ["Ø§Ù„Ø§Ù‚ØªÙ†Ø§Ø¹", "Ø§Ù„Ø¥Ù‚ØªÙ†Ø§Ø¹"],
    ["Ø§Ù„Ø§Ù†ØªÙÙ‘Ù‚Ø§Ù„", "Ø§Ù„Ø¥Ù†ØªÙ‚Ø§Ù„"],
    ["Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡", "Ø§Ù„Ø¥Ù†ØªÙ‡Ø§Ø¡"],
    ["Ø§Ù„Ø§Ù†Ù‚ÙŠØ§Ø¯", "Ø§Ù„Ø¥Ù†Ù‚ÙŠØ§Ø¯"],
    ["Ø¥Ù„ÙÙ‘Ø§", "Ø§Ù„Ø§"],
    ["Ø§Ù„Ø¥Ø¨Ù„", "Ø§Ù„Ø§Ø¨Ù„"],
    ["Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡", "Ø§Ù„Ø§Ø¬Ø±Ø§Ø¡"],
    ["Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„", "Ø§Ù„Ø§Ø¬Ù…Ø§Ù„"],
    ["Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠÙÙ‘Ø©", "Ø§Ù„Ø§Ø¬Ù…Ø§Ù„ÙŠØ©"],
    ["Ø§Ù„Ø¥Ø®Ù„Ø§Ø¡", "Ø§Ù„Ø§Ø®Ù„Ø§Ø¡"],
    ["Ø§Ù„Ø£Ø¯Ù„ÙÙ‘Ø©", "Ø§Ù„Ø§Ø¯Ù„Ø©"],
    ["Ø§Ù„Ø¥Ø³Ù„Ø§Ù…", "Ø§Ù„Ø§Ø³Ù„Ø§Ù…"],
    ["Ø§Ù„Ø¥Ø¹Ù„Ø§Ù…", "Ø§Ù„Ø§Ø¹Ù„Ø§Ù…"],
    ["Ø§Ù„Ø£ØºÙ†Ø§Ù…", "Ø§Ù„Ø§ØºÙ†Ø§Ù…"],
    ["Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©", "Ø§Ù„Ø§Ù‚Ø§Ù…Ø©"],
    ["Ø§Ù„Ø£Ù‚Ù„ÙÙ‘", "Ø§Ù„Ø§Ù‚Ù„"],
    ["Ø§Ù„Ø¥Ù…Ø§Ù…", "Ø§Ù„Ø§Ù…Ø§Ù…"],
    ["Ø§Ù„Ø¥Ù†ØµØ§Ù", "Ø§Ù„Ø§Ù†ØµØ§Ù"],
    ["Ø§Ù„Ø£ÙˆÙ„Ø§Ø¯", "Ø§Ù„Ø§ÙˆÙ„Ø§Ø¯"],
    ["Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹", "Ø§Ù„Ø§ÙŠØ¯Ø§Ø¹"],
    ["Ø§Ù„ØªÙÙ‘Ø¹Ø²ÙŠØ²", "Ø§Ù„ØªØ¹Ø²ÙŠØ±"],
    ["Ø§Ù„Ø§Ø³ØªØ¦Ù†Ø§Ù", "Ø§Ù„ØªÙ…ÙŠÙŠØ²"],
    ["Ø§Ù„Ø¶Ù‘ÙØ¨Ø·", "Ø§Ù„Ø¸Ø¨Ø·"],
    ["Ø§Ù„Ù…ØªØ¹Ø¯Ù‘ÙØ¯Ø©", "Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ù‡"],
    ["Ø§Ù„Ù…ØªÙˆÙÙ‘ÙÙ€Ù‰", "Ø§Ù„Ù…ØªÙˆÙÙ‰"],
    ["Ø§Ù„Ù€Ù…ÙØ®Ø¯Ù‘ÙØ±Ø§Øª", "Ø§Ù„Ù…Ø®Ø¯Ø±Ø§Øª"],
    ["Ø§Ù„Ù€Ù…ÙØ®Ø¯Ù‘ÙØ±Ø§Øª", "Ø§Ù„Ù…Ø®Ø¯Ù‘ÙØ±Ø§Øª"],
    ["Ø§Ù„Ù€Ù…ÙØ®Ù†Ù‘ÙØ«", "Ø§Ù„Ù…Ø®Ù†Ø«"],
    ["Ù€Ù€ Ø§Ù„Ù…Ø°ÙƒÙˆØ± Ù€Ù€", "Ø§Ù„Ù…Ø°ÙƒÙˆØ±"],
    ["Ù€Ù€ Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø§Ù† Ù€Ù€", "Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø§Ù†"],
    ["Ù€Ù€ Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø© Ù€Ù€", "Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø©"],
    ["Ù€Ù€ Ø§Ù„Ù…Ø°ÙƒÙˆØ± Ù€Ù€", "Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø±"],
    ["Ù€Ù€ Ø§Ù„Ù…Ø°ÙƒÙˆØ±ÙŠÙ† Ù€Ù€", "Ø§Ù„Ù…Ø°ÙƒÙˆØ±ÙŠÙ†"],
    ["Ù€Ù€ Ø§Ù„Ù…Ø±ÙÙ‚ ØµÙˆØ±ØªÙ‡ Ù€Ù€", "Ø§Ù„Ù…Ø±ÙÙ‚ ØµÙˆØ±ØªÙ‡"],
    ["Ø§Ù„Ù€Ù…ÙØ±ÙˆÙ‘ÙØ¬", "Ø§Ù„Ù…Ø±ÙˆØ¬"],
    ["Ø§Ù„Ù€Ù…ÙØ±ÙˆÙ‘ÙØ¬Ø§Ù†", "Ø§Ù„Ù…Ø±ÙˆØ¬Ø§Ù†"],
    ["Ø§Ù„Ù€Ù…ÙØ±ÙˆÙ‘ÙØ¬ÙˆÙ†", "Ø§Ù„Ù…Ø±ÙˆØ¬ÙˆÙ†"],
    ["Ø§Ù„Ù€Ù…ÙØ±ÙˆÙ‘ÙØ¬ÙŠÙ†", "Ø§Ù„Ù…Ø±ÙˆØ¬ÙŠÙ†"],
    ["Ù€Ù€ Ø§Ù„Ù…Ø´Ø§Ø± Ø¥Ù„ÙŠÙ‡Ø§ Ù€Ù€", "Ø§Ù„Ù…Ø´Ø§Ø± Ø¥Ù„ÙŠÙ‡Ø§"],
    ["Ø§Ù„Ù€Ù…ÙÙƒÙ„Ù‘ÙÙ", "Ø§Ù„Ù…ÙƒÙ„Ù"],
    ["Ø§Ù„Ù…Ù†Ù€Ø²Ù„", "Ø§Ù„Ù…Ù†Ø²Ù„"],
    ["Ù€Ù€ Ø§Ù„Ù…Ù†ÙˆÙ‘ÙÙ‡ Ø¹Ù†Ù‡Ø§ Ù€Ù€", "Ø§Ù„Ù…Ù†ÙˆÙ‡ Ø¹Ù†Ù‡Ø§"],
    ["Ù€Ù€ Ø§Ù„Ù…Ù†ÙˆÙ‘ÙÙ‡ Ø¹Ù†Ù‡ Ù€Ù€", "Ø§Ù„Ù…Ù†ÙˆÙ‘ÙÙ‡ Ø¹Ù†Ù‡"],
    ["Ø§Ù„Ù€Ù…ÙÙˆØ±Ù‘ÙØ«", "Ø§Ù„Ù…ÙˆØ±Ø«"],
    ["Ù€Ù€ Ø§Ù„Ù…ÙˆØµÙˆÙØ© ÙÙŠ Ø§Ù„Ø¯Ù‘ÙØ¹ÙˆÙ‰ Ù€Ù€", "Ø§Ù„Ù…ÙˆØµÙˆÙØ© ÙÙŠ Ø§Ù„Ø¯Ø¹ÙˆÙ‰"],
    ["Ø§Ù„Ù€Ù…ÙÙŠØ³Ù‘ÙØ±", "Ø§Ù„Ù…ÙŠØ³Ø±"],
    ["Ø§Ù„ØªÙ‘ÙÙ†ÙÙŠØ°ÙŠÙ‘", "Ø§Ù„Ù†ÙÙŠØ°ÙŠ"],
    ["Ø¥Ù„Ù‰", "Ø§Ù„Ù‰"],
    ["Ø¥Ù„ÙŠÙ‘Ù", "Ø§Ù„ÙŠ"],
    ["Ø¥Ù„ÙŠÙ†Ø§", "Ø§Ù„ÙŠÙ†Ø§"],
    ["Ø¥Ù„ÙŠÙ‡", "Ø§Ù„ÙŠÙ‡"],
    ["Ø¥Ù„ÙŠÙ‡Ø§", "Ø§Ù„ÙŠÙ‡Ø§"],
    ["Ø£Ù…Ù‘ÙØ§", "Ø§Ù…Ø§"],
    ["Ø¥Ù…Ø§Ø±Ø©", "Ø§Ù…Ø§Ø±Ø©"],
    ["Ø£Ù†Ù‘Ù", "Ø§Ù†"],
    ["Ø¥Ù†Ø´Ø§Ø¡Ø§Øª", "Ø§Ù†Ø´Ø§Ø¡Ø§Øª"],
    ["Ø¥Ù†Ù‘ÙÙ…Ø§", "Ø§Ù†Ù…Ø§"],
    ["Ø£Ù†Ù‘ÙÙ†Ø§", "Ø§Ù†Ù†Ø§"],
    ["Ø£Ù†Ù‘ÙÙ†ÙŠ", "Ø§Ù†Ù†ÙŠ"],
    ["Ø£Ù†Ù‘ÙÙ‡", "Ø§Ù†Ù‡"],
    ["Ø£Ù†Ù‘ÙÙ‡Ø§", "Ø§Ù†Ù‡Ø§"],
    ["Ø¥Ù†Ù‡Ø§Ø¡", "Ø§Ù†Ù‡Ø§Ø¡"],
    ["Ø¥Ù†Ù‡Ø§Ø¦ÙŠÙ‘ÙØ©", "Ø§Ù†Ù‡Ø§Ø¦ÙŠØ©"],
    ["Ø£Ù†Ù‘ÙÙ‡Ù…Ø§", "Ø§Ù†Ù‡Ù…Ø§"],
    ["Ø£ÙÙ†Ù‡ÙÙŠÙ", "Ø§Ù†Ù‡ÙŠ"],
    ["Ø£Ù‡Ù„ÙŠÙ‘ÙØ©", "Ø§Ù‡Ù„ÙŠØ©"],
    ["Ø£Ù‡Ù„ÙŠÙ‘ÙØªÙ‡", "Ø§Ù‡Ù„ÙŠØªÙ‡"],
    ["Ø£ÙˆÙ„Ù‹Ø§", "Ø§ÙˆÙ„Ø§"],
    ["Ø£ÙŠ", "Ø§ÙŠ"],
    ["Ø¥ÙŠÙ‘ÙØ§Ù‡", "Ø§ÙŠØ§Ù‡"],
    ["Ø¥ÙŠÙ‘ÙØ§Ù‡Ø§", "Ø§ÙŠØ§Ù‡Ø§"],
    ["Ø¥ÙŠØ¯Ø§Ø¹", "Ø§ÙŠØ¯Ø§Ø¹"],
    ["Ø¥ÙŠØµØ§Ù„", "Ø§ÙŠØµØ§Ù„"],
    ["Ø£ÙŠØ¶Ù‹Ø§", "Ø§ÙŠØ¶Ø§"],
    ["Ø¥ÙŠØ¶Ø§Ø­", "Ø§ÙŠØ¶Ø§Ø­"],
    ["Ø¥ÙŠÙ‚Ø§ÙÙ‡", "Ø§ÙŠÙ‚Ø§ÙÙ‡"],
    ["Ø¨Ø¥Ø¹Ù„Ø§Ù†", "Ø¨Ø£Ø¹Ù„Ø§Ù†"],
    ["Ø¨Ø§ØªÙ‘ÙÙØ§Ù‚", "Ø¨Ø¥ØªÙØ§Ù‚"],
    ["Ù€Ù€ Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡ Ù€Ù€", "Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡"],
    ["Ø¨Ø§Ù†ØªÙ‡Ø§Ø¡", "Ø¨Ø¥Ù†ØªÙ‡Ø§Ø¡"],
    ["Ø¨Ø¥Ø­Ø¶Ø§Ø±", "Ø¨Ø§Ø­Ø¶Ø§Ø±"],
    ["Ø¨Ø¥Ø­Ø¶Ø§Ø±Ù‡", "Ø¨Ø§Ø­Ø¶Ø§Ø±Ù‡"],
    ["Ø¨Ø¥Ø­Ø¶Ø§Ø±Ù‡Ø§", "Ø¨Ø§Ø­Ø¶Ø§Ø±Ù‡Ø§"],
    ["Ø¨Ø¥Ø°Ù†ÙÙ‡Ù", "Ø¨Ø§Ø°Ù†Ù‡"],
    ["Ø¨Ø¥Ø¹Ø§Ø¯Ø©", "Ø¨Ø§Ø¹Ø§Ø¯Ø©"],
    ["Ø¨Ø¥Ø¹Ù„Ø§Ù†", "Ø¨Ø§Ø¹Ù„Ø§Ù†"],
    ["Ø¥ÙƒÙ…Ø§Ù„", "Ø¨Ø§ÙƒÙ…Ø§Ù„"],
    ["Ø¨Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„", "Ø¨Ø§Ù„Ø¥Ø­ØªÙŠØ§Ù„"],
    ["Ø¨Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ", "Ø¨Ø§Ù„Ø¥Ø´ØªØ±Ø§Ùƒ"],
    ["Ø¨Ø§Ù„Ø§Ø·Ù‘ÙÙ„Ø§Ø¹", "Ø¨Ø§Ù„Ø¥Ø·Ù„Ø§Ø¹"],
    ["Ø¨Ø§Ù„Ø§Ø¹ØªØ±Ø§Ø¶", "Ø¨Ø§Ù„Ø¥Ø¹ØªØ±Ø§Ø¶"],
    ["Ø¨Ø§Ù„ØªÙ‘ÙÙ€Ø±Ø¬Ù…Ø©", "Ø¨Ø§Ù„ØªØ±Ø¬Ù…Ø©"],
    ["Ø¨Ø§Ù„Ù€Ù…ÙØ®Ø¯Ù‘ÙØ±Ø§Øª", "Ø¨Ø§Ù„Ù…Ø®Ø¯Ø±Ø§Øª"],
    ["Ø¨Ø§Ù„Ù€Ù…ÙØ®Ø¯Ù‘ÙØ±Ø§Øª", "Ø¨Ø§Ù„Ù…Ø®Ø¯Ù‘ÙØ±Ø§Øª"],
    ["Ø¨Ø£Ù†Ù‘Ù", "Ø¨Ø§Ù†"],
    ["Ø¨Ø£Ù†Ù‘ÙÙ‡Ù…", "Ø¨Ø§Ù†Ù‡Ù…"],
    ["Ø¨Ø£Ù†Ù‘ÙÙ‡Ù…Ø§", "Ø¨Ø§Ù†Ù‡Ù…Ø§"],
    ["Ø¨Ø±Ø§Ø¡Ø©", "Ø¨Ø±Ø£Ø©"],
    ["Ø¨Ù‚ÙˆÙ„ÙÙ‡Ù:", "Ø¨Ù‚ÙˆÙ„Ù‡"],
    ["Ø¨Ù‚ÙˆÙ„Ù‡Ø§:", "Ø¨Ù‚ÙˆÙ„Ù‡Ø§"],
    ["Ù€Ù€ ØªØ¹Ø§Ù„Ù‰ Ù€Ù€", "ØªØ¹Ø§Ù„Ù‰"],
    ["ØªØ¹Ù‡Ù‘ÙØ¯Ø§", "ØªØ¹Ù‡Ø¯"],
    ["Ø­Ø¸ÙŠØ±Ø©", "Ø­Ø¶ÙŠØ±Ø©"],
    ["Ø­Ø°Ù", "Ø®Ø°Ù"],
    ["Ù€Ù€ Ø¯ÙˆÙ† Ø±Ù‚Ù…Ù Ù€Ù€", "Ø¯ÙˆÙ† Ø±Ù‚Ù…"],
    ["Ù€Ù€ Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡ Ù€Ù€", "Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡"],
    ["Ø¥Ø°Ø§", "ØºØ°Ø§"],
    ["Ø¥Ù„ØºØ§Ø¡", "ØºÙ„ØºØ§Ø¡"],
    ["Ø¹Ù„Ù‰", "ØºÙ„Ù‰"],
    ["Ø¹Ù†", "ØºÙ†"],
    ["ÙØ£ÙØ¬ÙÙŠÙ’Ø¨ÙØª", "ÙØ§Ø¬ÙŠØ¨Øª"],
    ["ÙØ£ÙØ¹ÙÙŠØ¯Ù", "ÙØ§Ø¹ÙŠØ¯"],
    ["ÙØ§Ù„Ø§Ø­ØªÙŠØ§Ù„", "ÙØ§Ù„Ø¥Ø­ØªÙŠØ§Ù„"],
    ["ÙØ§Ù„Ø§Ø´ØªØ±Ø§Ùƒ", "ÙØ§Ù„Ø¥Ø´ØªØ±Ø§Ùƒ"],
    ["ÙØ§Ù„Ø§Ø¹ØªØ±Ø§Ø¶", "ÙØ§Ù„Ø¥Ø¹ØªØ±Ø§Ø¶"],
    ["ÙØ§Ù„Ù€Ù…ÙØ®Ø¯Ù‘ÙØ±Ø§Øª", "ÙØ§Ù„Ù…Ø®Ø¯Ø±Ø§Øª"],
    ["ÙØ¥Ù†Ù‘ÙÙ‡", "ÙØ§Ù†Ù‡"],
    ["ÙÙˆÙ‚", "ÙÙ‚Ùˆ"],
    ["ÙÙ„Ù… ÙŠØ¨Ù‚Ù", "ÙÙ„Ù… ÙŠØ¨Ù‚Ù‰"],
    ["ÙÙ‚Ø·", "Ù‚ÙØ·"],
    ["ÙƒØ§Ù„Ø§Ø®ØªØµØ§Øµ", "ÙƒØ§Ù„Ø¥Ø®ØªØµØ§Øµ"],
    ["Ø·Ø¨Ø§Ø¹Ø©", "ÙƒØ¨Ø§Ø¹Ø©"],
    ["Ù„Ø§Ø¨Ù†", "Ù„Ø¥Ø¨Ù†"],
    ["Ù„Ø§Ù†ØªÙ‡Ø§Ø¡", "Ù„Ø¥Ù†ØªÙ‡Ø§Ø¡"],
    ["Ù„Ø£Ù†Ù‘ÙÙ†ÙŠ", "Ù„Ø§Ù†Ù†ÙŠ"],
    ["Ù„Ø£Ù†Ù‘ÙÙ‡", "Ù„Ø§Ù†Ù‡"],
    ["Ù„Ø£Ù†Ù‘ÙÙ‡Ø§", "Ù„Ø§Ù†Ù‡Ø§"],
    ["Ø§Ù„Ø¯Ù‘ÙØ³ÙˆÙ‚ÙŠÙ‘", "Ù„Ø¯Ø³ÙˆÙ‚ÙŠ"],
    ["Ù„Ù„Ø§Ø­ØªÙŠØ§Ù„", "Ù„Ù„Ø¥Ø­ØªÙŠØ§Ù„"],
    ["Ù„Ù„Ø§Ø³ØªÙ†Ø§Ø¯", "Ù„Ù„Ø¥Ø³ØªÙ†Ø§Ø¯"],
    ["Ù„Ù„Ø§Ø·Ù‘ÙÙ„Ø§Ø¹", "Ù„Ù„Ø¥Ø·Ù„Ø§Ø¹"],
    ["Ù„Ù„Ù…Ù†Ù€Ø²Ù„", "Ù„Ù„Ù…Ù†Ø²Ù„"],
    ["Ù„Ù… ÙŠØ¨Ù‚Ù", "Ù„Ù… ÙŠØ¨Ù‚Ù‰"],
    ["Ù„Ù€Ù…Ø§", "Ù„Ù…Ø§"],
    ["Ù„Ù€Ù…ÙÙ‡Ø±Ù‘ÙØ¨ÙŠ", "Ù„Ù…Ù‡Ø±Ø¨ÙŠ"],
    ["Ù…Ø§ Ù„Ø¯ÙŠÙ‘Ù", "Ù…Ø§ Ù„Ø¯Ù‰"],
    ["Ù…Ø§ Ù„Ø¯ÙŠÙ‘Ù.", "Ù…Ø§ Ù„Ø¯ÙŠ"],
    ["Ù…Ø§ Ù„Ø¯ÙŠÙ‘Ù", "Ù…Ø§Ù„Ø¯ÙŠ"],
    ["Ù…ØªØ¹Ø¯Ù‘ÙØ¯Ø©", "Ù…ØªØ¹Ø¯Ø¯Ù‡"],
    ["Ù…Ø¹Ø²Ù‘ÙÙŠ", "Ù…Ø¹Ø²Ù‰"],
    ["Ù…Ø¹", "Ù…Øº"],
    ["Ù…Ù†Ù€Ø²Ù„Ù‹Ø§", "Ù…Ù†Ø²Ù„Ø§"],
    ["Ù…Ø¤Ø³Ù‘ÙØ³Ø©", "Ù…ÙˆØ³Ø³Ø©"],
    ["Ùˆ Ø¨Ù…Ø§", "ÙˆØ¨Ù…Ø§"],
    ["Ùˆ Ù‚Ø¯Ø±Ù‡", "ÙˆÙ‚Ø¯Ø±Ù‡"],
    ["Ùˆ Ù‚Ø¯Ø±Ù‡Ø§", "ÙˆÙ‚Ø¯Ø±Ù‡Ø§"],
    ["Ùˆ Ù„Ø§", "ÙˆÙ„Ø§"],
    ["Ùˆ Ù„ÙŠØ³", "ÙˆÙ„ÙŠØ³"],
    ["Ùˆ Ù‡Ùˆ", "ÙˆÙ‡Ùˆ"],
    ["Ùˆ Ù‡ÙŠ", "ÙˆÙ‡ÙŠ"],
    ["ÙŠØ¯Ù‘ÙØ¹Ù‰", "ÙŠØ¯Ø¹ÙŠ"],
    ["ÙŠÙ€ÙÙ…Ø«Ù‘ÙÙ„Ù‡", "ÙŠÙ…Ø«Ù„Ù‡"],
    ["ÙŠÙ€ÙÙ…Ø«Ù‘ÙÙ„Ù‡Ø§", "ÙŠÙ…Ø«Ù„Ù‡Ø§"],
    ["ÙŠÙ€ÙÙ…Ø«Ù‘ÙÙ„Ù‡Ù…", "ÙŠÙ…Ø«Ù„Ù‡Ù…"],
    ["ÙŠÙ€ÙÙ…Ø«Ù‘ÙÙ„Ù‡Ù…Ø§", "ÙŠÙ…Ø«Ù„Ù‡Ù…Ø§"]
];

        // ØªØ±ØªÙŠØ¨ Ø§Ù„ØªØµØ­ÙŠØ­Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø·ÙˆÙ„ (Ø§Ù„Ø£Ø·ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹)
        corrections.sort((a, b) => b[1].length - a[1].length);

        // Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø­Ø±Ù
        document.getElementById('inputText').addEventListener('input', function() {
            const text = this.value;
            const charCount = text.replace(/\s/g, '').length;
            document.getElementById('inputCharCount').textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù: ${charCount.toLocaleString('ar-SA')}`;
        });

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function countChars(text) {
            return text.replace(/\s/g, '').length;
        }

        async function processText() {
            const inputText = document.getElementById('inputText').value;
            
            if (!inputText.trim()) {
                showToast('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù†Øµ Ù„Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©');
                return;
            }

            // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            document.getElementById('loading').classList.add('show');
            document.getElementById('processBtn').disabled = true;

            // Ø§Ø³ØªØ®Ø¯Ø§Ù… setTimeout Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            setTimeout(() => {
                let text = inputText;
                let spacesCount = 0;
                let colonsCount = 0;
                let sessionsCount = 0;
                let deletedCount = 0;
                let emptyLinesCount = 0;
                let correctionsCount = 0;

                // 1. Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ø³Ø§ÙØªÙŠÙ† Ø¨Ù…Ø³Ø§ÙØ© ÙˆØ§Ø­Ø¯Ø©
                const beforeSpaces = text;
                text = text.replace(/  +/g, ' ');
                spacesCount = (beforeSpaces.match(/  +/g) || []).length;

                // 2. Ø§Ø³ØªØ¨Ø¯Ø§Ù„ " :" Ø¨ ": "
                const beforeColons = text;
                text = text.replace(/ :/g, ': ');
                colonsCount = (beforeColons.match(/ :/g) || []).length;

                // 3. Ø­Ø°Ù Ø§Ù„Ø£Ø³Ø·Ø± Ø§Ù„ÙØ§Ø±ØºØ©
                const beforeEmptyLines = text;
                text = text.replace(/\n\s*\n/g, '\n');
                emptyLinesCount = (beforeEmptyLines.match(/\n\s*\n/g) || []).length;


                // 4. Ø¯Ù…Ø¬ Ø§Ù„Ø¬Ù„Ø³Ø§Øª
                const sessionMergePatterns = [
    // 1- Ø±ÙØ¹Øª Ø§Ù„Ø¬Ù„Ø³Ø©. Ø§ÙØªØªØ­Øª Ø§Ù„Ø¬Ù„Ø³Ø© ÙˆÙÙŠÙ‡Ø§
    {
        pattern: /Ø±ÙØ¹Øª?\s+Ø§Ù„Ø¬Ù„Ø³Ø©\.\s*Ø§ÙØªØªØ­Øª\s+Ø§Ù„Ø¬Ù„Ø³Ø©\s+ÙˆÙÙŠÙ‡Ø§/g,
        replacement: 'ÙˆÙÙŠ Ø¬Ù„Ø³Ø© Ø£Ø®Ø±Ù‰'
    },
    // 2- Ø±ÙØ¹ Ø§Ù„Ø¬Ù„Ø³Ø© ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ù„Ø³Ø©
    {
        pattern: /Ø±ÙØ¹\s+Ø§Ù„Ø¬Ù„Ø³Ø©\s+ÙÙŠ\s+Ù‡Ø°Ù‡\s+Ø§Ù„Ø¬Ù„Ø³Ø©/g,
        replacement: 'ÙˆÙÙŠ Ø¬Ù„Ø³Ø© Ø£Ø®Ø±Ù‰'
    },
    // 3- Ø±ÙØ¹ Ø§Ù„Ø¬Ù„Ø³Ø© ÙˆÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ù„Ø³Ø©
    {
        pattern: /Ø±ÙØ¹\s+Ø§Ù„Ø¬Ù„Ø³Ø©\s+ÙˆÙÙŠ\s+Ù‡Ø°Ù‡\s+Ø§Ù„Ø¬Ù„Ø³Ø©/g,
        replacement: 'ÙˆÙÙŠ Ø¬Ù„Ø³Ø© Ø£Ø®Ø±Ù‰'
    },
    // 4- ÙˆÙƒØ§Ù† Ø®ØªØ§Ù…Ù‡Ø§ Ø§Ù„Ø³Ø§Ø¹Ø© XX:XX ØµØ¨Ø§Ø­Ø§Ù‹/Ù…Ø³Ø§Ø¡Ù‹. ÙˆÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ù„Ø³Ø©
    {
        pattern: /ÙˆÙƒØ§Ù†\s+Ø®ØªØ§Ù…Ù‡Ø§\s+Ø§Ù„Ø³Ø§Ø¹Ø©\s+\d{1,2}:\d{2}\s+(?:ØµØ¨Ø§Ø­Ø§Ù‹|Ù…Ø³Ø§Ø¡Ù‹)\.\s*ÙˆÙÙŠ\s+Ù‡Ø°Ù‡\s+Ø§Ù„Ø¬Ù„Ø³Ø©/g,
        replacement: 'ÙˆÙÙŠ Ø¬Ù„Ø³Ø© Ø£Ø®Ø±Ù‰'
    },
    // 5- Ø±ÙØ¹ Ø§Ù„Ø¬Ù„Ø³Ø© Ù„Ù„Ù†Ø·Ù‚ Ø¨Ø§Ù„Ø­ÙƒÙ…. Ø§ÙØªØªØ­Øª Ø§Ù„Ø¬Ù„Ø³Ø© ÙˆÙÙŠÙ‡Ø§
    {
        pattern: /Ø±ÙØ¹\s+Ø§Ù„Ø¬Ù„Ø³Ø©\s+Ù„Ù„Ù†Ø·Ù‚\s+Ø¨Ø§Ù„Ø­ÙƒÙ…\.\s*Ø§ÙØªØªØ­Øª\s+Ø§Ù„Ø¬Ù„Ø³Ø©\s+ÙˆÙÙŠÙ‡Ø§/g,
        replacement: 'Ø±ÙØ¹ Ø§Ù„Ø¬Ù„Ø³Ø© Ù„Ù„Ù†Ø·Ù‚ Ø¨Ø§Ù„Ø­ÙƒÙ…. ÙˆÙÙŠ Ø¬Ù„Ø³Ø© Ø£Ø®Ø±Ù‰'
    }
];

// ØªØ·Ø¨ÙŠÙ‚ Ø£Ù†Ù…Ø§Ø· Ø¯Ù…Ø¬ Ø§Ù„Ø¬Ù„Ø³Ø§Øª
sessionMergePatterns.forEach(({pattern, replacement}) => {
    const matches = text.match(pattern);
    if (matches) {
        sessionsCount += matches.length;
        text = text.replace(pattern, replacement);
    }
});

// 5. Ø§Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ù„ØºÙˆÙŠ (Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙØ¹Ù‘Ù„Ø§Ù‹)
                let correctedWords = [];

                if (document.getElementById('enableCorrection').checked) {
                    corrections.forEach(([correct, wrong]) => {
                        const escapedWrong = wrong.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                        const regex = new RegExp('(^|[^\\u0600-\\u06FF])' + escapedWrong + '(?![\\u0600-\\u06FF])', 'g');
                        const foundMatches = text.match(regex);
                        if (foundMatches) {
                            correctionsCount += foundMatches.length;
                            correctedWords.push({wrong: wrong, correct: correct, count: foundMatches.length});
                            text = text.replace(regex, '$1' + correct);
                        }
                    });
                }

                // Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù‚Ø¯ÙŠÙ… Ù„Ø¯Ù…Ø¬ Ø§Ù„Ø¬Ù„Ø³Ø§Øª
                const sessionRegex = /(Ø±ÙØ¹Øª?\s+Ø§Ù„Ø¬Ù„Ø³Ø©)([\s\S]*?)(Ø­Ø¶Ø±Øª?(?:\s|$))/g;
                let match;
                const sessionMatches = [];
                
                while ((match = sessionRegex.exec(text)) !== null) {
                    sessionMatches.push({
                        fullMatch: match[0],
                        start: match[1],
                        middle: match[2],
                        end: match[3],
                        index: match.index
                    });
                }

                for (let i = sessionMatches.length - 1; i >= 0; i--) {
                    const m = sessionMatches[i];
                    const middleText = m.middle;
                    const wordCount = middleText.trim().split(/\s+/).length;
                    
                    if (wordCount < 17) {
                        const hasTawfiq = middleText.includes('ÙˆØ¨Ø§Ù„Ù„Ù‡ Ø§Ù„ØªÙˆÙÙŠÙ‚');
                        const hasKhitam = middleText.includes('Ø®ØªØ§Ù…Ù‡Ø§');
                        const hasDirasa = middleText.includes('Ù„Ù„Ø¯Ø±Ø§Ø³Ø©');
                        
                        if (hasTawfiq || hasKhitam || hasDirasa) {
                            const replacement = m.start + ' ÙˆÙÙŠ Ø¬Ù„Ø³Ø© Ø£Ø®Ø±Ù‰ ' + m.end;
                            text = text.substring(0, m.index) + replacement + text.substring(m.index + m.fullMatch.length);
                            sessionsCount++;
                        }
                    }
                }

                // 6. Ø­Ø°Ù Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø´Ø·Ø¨
                const shatbPattern = /Ù„Ø°Ø§ ÙÙ‚Ø¯ Ù‚Ø±Ø±Øª Ø§Ù„Ø¯ÙÙ‘Ø§Ø¦Ø±Ø© Ø´Ø·Ø¨ Ø§Ù„Ø¯Ø¹ÙˆÙ‰/g;
                let shatbMatch;
                const shatbPositions = [];
                
                while ((shatbMatch = shatbPattern.exec(text)) !== null) {
                    shatbPositions.push(shatbMatch.index);
                }

                for (let i = shatbPositions.length - 1; i >= 0; i--) {
                    const shatbPos = shatbPositions[i];
                    const textBeforeShatb = text.substring(0, shatbPos);
                    
                    const startPatterns = [
                        /Ø§ÙØªØªØ­Øª\s+Ø§Ù„Ø¬Ù„Ø³Ø©/g,
                        /ÙÙ„Ø¯ÙŠ\s+Ø£Ù†Ø§/g,
                        /Ù„Ø¯ÙŠ\s+Ø£Ù†Ø§/g
                    ];
                    
                    let lastStartPos = -1;
                    
                    for (const pattern of startPatterns) {
                        let startMatch;
                        while ((startMatch = pattern.exec(textBeforeShatb)) !== null) {
                            if (startMatch.index > lastStartPos) {
                                lastStartPos = startMatch.index;
                            }
                        }
                    }
                    
                    if (lastStartPos !== -1) {
                        const textAfterShatb = text.substring(shatbPos);
                        const endPattern = /ÙˆØµØ­Ø¨Ù‡ ÙˆØ³Ù„Ù…/;
                        const endMatch = endPattern.exec(textAfterShatb);
                        
                        if (endMatch) {
                            const endPos = shatbPos + endMatch.index + endMatch[0].length;
                            text = text.substring(0, lastStartPos) + text.substring(endPos);
                            deletedCount++;
                        }
                    }
                }

                // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                processedResult = text;

                // Ø¹Ø±Ø¶ Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ Ù…Ø¹ ØªÙ…ÙŠÙŠØ² Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø© Ø¨Ø®Ø· Ø£Ø­Ù…Ø± ØªØ­ØªÙ‡Ø§
                let originalHighlighted = inputText;
                let processedHighlighted = text;

                correctedWords.forEach(({wrong, correct}) => {
                    const escapedWrong = wrong.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                    const escapedCorrect = correct.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                    const wrongRegex = new RegExp('(^|[^\\u0600-\\u06FF])' + escapedWrong + '(?![\\u0600-\\u06FF])', 'g');
                    const correctRegex = new RegExp('(^|[^\\u0600-\\u06FF])' + escapedCorrect + '(?![\\u0600-\\u06FF])', 'g');
                    
                    originalHighlighted = originalHighlighted.replace(wrongRegex, '$1<span class="corrected-word">' + wrong + '</span>');
                    processedHighlighted = processedHighlighted.replace(correctRegex, '$1<span class="corrected-word">' + correct + '</span>');
                });

                document.getElementById('originalText').innerHTML = originalHighlighted;
                document.getElementById('processedText').innerHTML = processedHighlighted;
                
                // Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù
                const originalCharCount = countChars(inputText);
                const processedCharCount = countChars(text);
                
                document.getElementById('originalCharCount').textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù: ${originalCharCount.toLocaleString('ar-SA')}`;
                document.getElementById('processedCharCount').textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù: ${processedCharCount.toLocaleString('ar-SA')}`;
                
                document.getElementById('spacesCount').textContent = spacesCount;
                document.getElementById('colonsCount').textContent = colonsCount;
                document.getElementById('sessionsCount').textContent = sessionsCount;
                document.getElementById('deletedCount').textContent = deletedCount;
                document.getElementById('emptyLinesCount').textContent = emptyLinesCount;
                document.getElementById('correctionsCount').textContent = correctionsCount;
                
                document.getElementById('stats').classList.add('show');
                document.getElementById('comparison').style.display = 'grid';
                document.getElementById('copyBtn').disabled = false;
                document.getElementById('downloadBtn').disabled = false;

                // Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                document.getElementById('loading').classList.remove('show');
                document.getElementById('processBtn').disabled = false;

                showToast('âœ… ØªÙ…Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨Ù†Ø¬Ø§Ø­!');
            }, 100);
        }

        function copyResult() {
            navigator.clipboard.writeText(processedResult).then(() => {
                showToast('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ù†Ø¬Ø§Ø­!');
            }).catch(() => {
                showToast('âŒ ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');
            });
        }

        function downloadResult() {
            const blob = new Blob([processedResult], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            
            const now = new Date();
            const filename = `ØµÙƒ_Ù…Ø¹Ø§Ù„Ø¬_${now.getFullYear()}-${(now.getMonth()+1).toString().padStart(2,'0')}-${now.getDate().toString().padStart(2,'0')}.txt`;
            a.download = filename;
            
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø¨Ù†Ø¬Ø§Ø­!');
        }
    </script>
</body>
</html>